{"ast":null,"code":"import _asyncToGenerator from\"/Users/yardentsaraf/Desktop/EpicureApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/yardentsaraf/Desktop/EpicureApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/yardentsaraf/Desktop/EpicureApp/node_modules/@babel/runtime/regenerator/index.js\";import{Fragment,useEffect,useState}from\"react\";import Input from\"../layout/form/Input\";import\"./User.scss\";import{Link}from\"react-router-dom\";import Header from\"../header/Header\";import Footer from\"../footer/Footer\";import SubmitButton from\"../layout/button/SubmitButton\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignUp=function SignUp(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),usernameInputs=_useState2[0],setUsernameInputs=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),firstnameInputs=_useState4[0],setFirstnameInputs=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),lastnameInputs=_useState6[0],setLastnameInputs=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),passwordInputs=_useState8[0],setPasswordInputs=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),feedback=_useState10[0],setFeedback=_useState10[1];var handleChangeUsername=function handleChangeUsername(e){setUsernameInputs(e.target.value);};var handleChangeFirstname=function handleChangeFirstname(e){setFirstnameInputs(e.target.value);};var handleChangeLastname=function handleChangeLastname(e){setLastnameInputs(e.target.value);};var handleChangePassword=function handleChangePassword(e){setPasswordInputs(e.target.value);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post(\"http://localhost:8080/auth/signup\",{username:usernameInputs,password:passwordInputs,firstName:firstnameInputs,lastName:lastnameInputs});case 4:result=_context.sent;console.log(result);if(result.data.token)localStorage.setItem(\"token\",result.data.token);setFeedback(\"Signed up successfuly\");_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);setFeedback(_context.t0.response.data||\"Network error. try again\");case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var isLoggedIn=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var token,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:token=localStorage.getItem(\"token\");_context2.prev=1;_context2.next=4;return axios.get(\"http://localhost:8080/auth\",{headers:{\"auth-token\":token}});case 4:result=_context2.sent;_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](1);localStorage.removeItem(\"token\");case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[1,7]]);}));return function isLoggedIn(){return _ref2.apply(this,arguments);};}();useEffect(function(){var token=localStorage.getItem(\"token\");if(token)isLoggedIn();},[]);return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign Up\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please fill in this form to create an account.\"}),/*#__PURE__*/_jsx(Input,{content:\"First Name \",placeholder:\"Please Enter Your First Name\",type:\"text\",onChange:function onChange(e){return handleChangeFirstname(e);},value:firstnameInputs,minLength:2,maxLength:10}),/*#__PURE__*/_jsx(Input,{content:\"Last Name \",placeholder:\"Please Enter Your Last Name\",type:\"text\",onChange:function onChange(e){return handleChangeLastname(e);},value:lastnameInputs,minLength:2,maxLength:10}),/*#__PURE__*/_jsx(Input,{content:\"Username \",placeholder:\"Please Enter Your Username\",type:\"text\",onChange:function onChange(e){return handleChangeUsername(e);},value:usernameInputs,minLength:2,maxLength:15}),/*#__PURE__*/_jsx(Input,{content:\"Password \",placeholder:\"Please Enter Your Password\",type:\"password\",onChange:function onChange(e){return handleChangePassword(e);},value:passwordInputs,minLength:6,maxLength:10}),/*#__PURE__*/_jsx(SubmitButton,{onClick:function onClick(e){return handleSubmit(e);}}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/signin\",children:\"Sign In\"})]}),/*#__PURE__*/_jsx(\"b\",{children:feedback})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default SignUp;","map":{"version":3,"sources":["/Users/yardentsaraf/Desktop/EpicureApp/src/components/user/SignUp.tsx"],"names":["Fragment","useEffect","useState","Input","Link","Header","Footer","SubmitButton","axios","SignUp","usernameInputs","setUsernameInputs","firstnameInputs","setFirstnameInputs","lastnameInputs","setLastnameInputs","passwordInputs","setPasswordInputs","feedback","setFeedback","handleChangeUsername","e","target","value","handleChangeFirstname","handleChangeLastname","handleChangePassword","handleSubmit","preventDefault","post","username","password","firstName","lastName","result","console","log","data","token","localStorage","setItem","response","isLoggedIn","getItem","get","headers","removeItem"],"mappings":"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","sourcesContent":["import { Fragment, useEffect, useState } from \"react\";\nimport Input from \"../layout/form/Input\";\nimport \"./User.scss\";\nimport { Link } from \"react-router-dom\";\nimport Header from \"../header/Header\";\nimport Footer from \"../footer/Footer\";\nimport SubmitButton from \"../layout/button/SubmitButton\";\nimport axios from \"axios\";\nconst SignUp = () => {\n  const [usernameInputs, setUsernameInputs] = useState();\n  const [firstnameInputs, setFirstnameInputs] = useState();\n  const [lastnameInputs, setLastnameInputs] = useState();\n  const [passwordInputs, setPasswordInputs] = useState();\n\n  const [feedback, setFeedback] = useState(\"\");\n\n  const handleChangeUsername = (e: any) => {\n    setUsernameInputs(e.target.value);\n  };\n  const handleChangeFirstname = (e: any) => {\n    setFirstnameInputs(e.target.value);\n  };\n  const handleChangeLastname = (e: any) => {\n    setLastnameInputs(e.target.value);\n  };\n  const handleChangePassword = (e: any) => {\n    setPasswordInputs(e.target.value);\n  };\n\n  const handleSubmit = async (e: any) => {\n    e.preventDefault();\n    try {\n      const result = await axios.post(\"http://localhost:8080/auth/signup\", {\n        username: usernameInputs,\n        password: passwordInputs,\n        firstName: firstnameInputs,\n        lastName: lastnameInputs,\n      });\n      console.log(result);\n      if (result.data.token) localStorage.setItem(\"token\", result.data.token);\n      setFeedback(\"Signed up successfuly\");\n    } catch (err: any) {\n      setFeedback(err.response.data || \"Network error. try again\");\n    }\n  };\n\n  const isLoggedIn = async () => {\n    const token: any = localStorage.getItem(\"token\");\n    try {\n      const result = await axios.get(\"http://localhost:8080/auth\", {\n        headers: {\n          \"auth-token\": token,\n        },\n      });\n    } catch (err) {\n      localStorage.removeItem(\"token\");\n    }\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) isLoggedIn();\n  }, []);\n\n  return (\n    <Fragment>\n      <Header />\n      <form>\n        <h2>Sign Up</h2>\n        <p>Please fill in this form to create an account.</p>\n        <Input\n          content={\"First Name \"}\n          placeholder={\"Please Enter Your First Name\"}\n          type={\"text\"}\n          onChange={(e: any) => handleChangeFirstname(e)}\n          value={firstnameInputs}\n          minLength={2}\n          maxLength={10}\n        ></Input>\n        <Input\n          content={\"Last Name \"}\n          placeholder={\"Please Enter Your Last Name\"}\n          type={\"text\"}\n          onChange={(e: any) => handleChangeLastname(e)}\n          value={lastnameInputs}\n          minLength={2}\n          maxLength={10}\n        ></Input>\n        <Input\n          content={\"Username \"}\n          placeholder={\"Please Enter Your Username\"}\n          type={\"text\"}\n          onChange={(e: any) => handleChangeUsername(e)}\n          value={usernameInputs}\n          minLength={2}\n          maxLength={15}\n        ></Input>\n        <Input\n          content={\"Password \"}\n          placeholder={\"Please Enter Your Password\"}\n          type={\"password\"}\n          onChange={(e: any) => handleChangePassword(e)}\n          value={passwordInputs}\n          minLength={6}\n          maxLength={10}\n        ></Input>\n        <SubmitButton onClick={(e: any) => handleSubmit(e)} />\n        <p>\n          Already have an account? <Link to=\"/signin\">Sign In</Link>\n        </p>\n        <b>{feedback}</b>\n      </form>\n      <Footer />\n    </Fragment>\n  );\n};\n\nexport default SignUp;\n"]},"metadata":{},"sourceType":"module"}